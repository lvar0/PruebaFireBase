{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///Users/alvaro/Desktop/Prueba-Frikifiguras/src/lib/firebase/config.ts"],"sourcesContent":["\nimport { initializeApp, getApps, getApp, type FirebaseOptions } from 'firebase/app';\nimport { getAuth, type Auth } from 'firebase/auth';\nimport { getFirestore, type Firestore } from 'firebase/firestore';\nimport { getStorage, type FirebaseStorage } from 'firebase/storage';\n\nconst firebaseConfig: FirebaseOptions = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n};\n\nfunction isFirebaseConfigured(config: FirebaseOptions): boolean {\n  return !!(config.apiKey && config.projectId && config.authDomain);\n}\n\nconst isConfigured = isFirebaseConfigured(firebaseConfig);\n\nconst app = isConfigured ? (!getApps().length ? initializeApp(firebaseConfig) : getApp()) : null;\nconst auth: Auth | null = app ? getAuth(app) : null;\nconst db: Firestore | null = app ? getFirestore(app) : null;\nconst storage: FirebaseStorage | null = app ? getStorage(app) : null;\n\nexport { app, auth, db, storage, isConfigured };\n"],"names":[],"mappings":";;;;;;;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,MAAM,iBAAkC;IACtC,QAAQ,QAAQ,GAAG,CAAC,4BAA4B;IAChD,YAAY,QAAQ,GAAG,CAAC,gCAAgC;IACxD,WAAW,QAAQ,GAAG,CAAC,+BAA+B;IACtD,eAAe,QAAQ,GAAG,CAAC,mCAAmC;IAC9D,mBAAmB,QAAQ,GAAG,CAAC,wCAAwC;IACvE,OAAO,QAAQ,GAAG,CAAC,2BAA2B;AAChD;AAEA,SAAS,qBAAqB,MAAuB;IACnD,OAAO,CAAC,CAAC,CAAC,OAAO,MAAM,IAAI,OAAO,SAAS,IAAI,OAAO,UAAU;AAClE;AAEA,MAAM,eAAe,qBAAqB;AAE1C,MAAM,MAAM,eAAgB,CAAC,CAAA,GAAA,mPAAA,CAAA,UAAO,AAAD,IAAI,MAAM,GAAG,CAAA,GAAA,mPAAA,CAAA,gBAAa,AAAD,EAAE,kBAAkB,CAAA,GAAA,mPAAA,CAAA,SAAM,AAAD,MAAO;AAC5F,MAAM,OAAoB,MAAM,CAAA,GAAA,iTAAA,CAAA,UAAO,AAAD,EAAE,OAAO;AAC/C,MAAM,KAAuB,MAAM,CAAA,GAAA,yQAAA,CAAA,eAAY,AAAD,EAAE,OAAO;AACvD,MAAM,UAAkC,MAAM,CAAA,GAAA,4RAAA,CAAA,aAAU,AAAD,EAAE,OAAO","debugId":null}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///Users/alvaro/Desktop/Prueba-Frikifiguras/src/lib/firebase/storage.ts"],"sourcesContent":["import { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport { storage } from './config';\n\nexport async function uploadImage(file: File, path: string): Promise<string> {\n  if (!storage) throw new Error(\"Firebase is not configured.\");\n  const storageRef = ref(storage, path);\n  const snapshot = await uploadBytes(storageRef, file);\n  const downloadURL = await getDownloadURL(snapshot.ref);\n  return downloadURL;\n}\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;;;AAEO,eAAe,YAAY,IAAU,EAAE,IAAY;IACxD,IAAI,CAAC,gIAAA,CAAA,UAAO,EAAE,MAAM,IAAI,MAAM;IAC9B,MAAM,aAAa,CAAA,GAAA,4RAAA,CAAA,MAAG,AAAD,EAAE,gIAAA,CAAA,UAAO,EAAE;IAChC,MAAM,WAAW,MAAM,CAAA,GAAA,4RAAA,CAAA,cAAW,AAAD,EAAE,YAAY;IAC/C,MAAM,cAAc,MAAM,CAAA,GAAA,4RAAA,CAAA,iBAAc,AAAD,EAAE,SAAS,GAAG;IACrD,OAAO;AACT","debugId":null}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":["file:///Users/alvaro/Desktop/Prueba-Frikifiguras/src/lib/firebase/firestore.ts"],"sourcesContent":["import { collection, getDocs, doc, setDoc, getDoc, addDoc } from 'firebase/firestore';\nimport { db } from './config';\nimport type { Figure, AppUser } from '@/lib/types';\n\nexport async function getFigures(): Promise<Figure[]> {\n  // guard: si estamos en el cliente pero db no está inicializado, devolver vacío\n  if (!db) return [];\n  try {\n    const querySnapshot = await getDocs(collection(db, 'figuras'));\n    const figures = querySnapshot.docs.map((docSnap) => ({\n      id: docSnap.id,\n      ...docSnap.data(),\n    } as Figure));\n    return figures;\n  } catch (error) {\n    console.error(\"Error fetching figures: \", error);\n    return [];\n  }\n}\n\nexport async function addFigure(figureData: Omit<Figure, 'id'>): Promise<string> {\n    if (!db) throw new Error(\"Firebase is not configured.\");\n    const docRef = await addDoc(collection(db, 'figuras'), figureData);\n    return docRef.id;\n}\n\n\nexport async function createUserProfile(userId: string, data: { nombre: string; email: string | null }) {\n  if (!db) throw new Error(\"Firebase is not configured.\");\n  try {\n    await setDoc(doc(db, 'usuarios', userId), data);\n  } catch (error) {\n    console.error('Error creating user profile:', error);\n    throw new Error('Could not create user profile.');\n  }\n}\n\nexport async function getUserProfile(userId: string): Promise<AppUser | null> {\n  if (!db) return null;\n  try {\n    const docRef = doc(db, 'usuarios', userId);\n    const docSnap = await getDoc(docRef);\n    if (docSnap.exists()) {\n      return { uid: docSnap.id, ...docSnap.data() } as AppUser;\n    } else {\n      return null;\n    }\n  } catch (error) {\n    console.error('Error fetching user profile:', error);\n    return null;\n  }\n}\n\n// añadir export default para compatibilidad con imports dinámicos que esperan default\nexport default getFigures;\n"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AACA;;;AAGO,eAAe;IACpB,+EAA+E;IAC/E,IAAI,CAAC,gIAAA,CAAA,KAAE,EAAE,OAAO,EAAE;IAClB,IAAI;QACF,MAAM,gBAAgB,MAAM,CAAA,GAAA,yQAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,yQAAA,CAAA,aAAU,AAAD,EAAE,gIAAA,CAAA,KAAE,EAAE;QACnD,MAAM,UAAU,cAAc,IAAI,CAAC,GAAG,CAAC,CAAC,UAAY,CAAC;gBACnD,IAAI,QAAQ,EAAE;gBACd,GAAG,QAAQ,IAAI,EAAE;YACnB,CAAW;QACX,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,EAAE;IACX;AACF;AAEO,eAAe,UAAU,UAA8B;IAC1D,IAAI,CAAC,gIAAA,CAAA,KAAE,EAAE,MAAM,IAAI,MAAM;IACzB,MAAM,SAAS,MAAM,CAAA,GAAA,yQAAA,CAAA,SAAM,AAAD,EAAE,CAAA,GAAA,yQAAA,CAAA,aAAU,AAAD,EAAE,gIAAA,CAAA,KAAE,EAAE,YAAY;IACvD,OAAO,OAAO,EAAE;AACpB;AAGO,eAAe,kBAAkB,MAAc,EAAE,IAA8C;IACpG,IAAI,CAAC,gIAAA,CAAA,KAAE,EAAE,MAAM,IAAI,MAAM;IACzB,IAAI;QACF,MAAM,CAAA,GAAA,yQAAA,CAAA,SAAM,AAAD,EAAE,CAAA,GAAA,yQAAA,CAAA,MAAG,AAAD,EAAE,gIAAA,CAAA,KAAE,EAAE,YAAY,SAAS;IAC5C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,MAAM,IAAI,MAAM;IAClB;AACF;AAEO,eAAe,eAAe,MAAc;IACjD,IAAI,CAAC,gIAAA,CAAA,KAAE,EAAE,OAAO;IAChB,IAAI;QACF,MAAM,SAAS,CAAA,GAAA,yQAAA,CAAA,MAAG,AAAD,EAAE,gIAAA,CAAA,KAAE,EAAE,YAAY;QACnC,MAAM,UAAU,MAAM,CAAA,GAAA,yQAAA,CAAA,SAAM,AAAD,EAAE;QAC7B,IAAI,QAAQ,MAAM,IAAI;YACpB,OAAO;gBAAE,KAAK,QAAQ,EAAE;gBAAE,GAAG,QAAQ,IAAI,EAAE;YAAC;QAC9C,OAAO;YACL,OAAO;QACT;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO;IACT;AACF;uCAGe","debugId":null}},
    {"offset": {"line": 240, "column": 0}, "map": {"version":3,"sources":["file:///Users/alvaro/Desktop/Prueba-Frikifiguras/src/app/admin/actions.ts"],"sourcesContent":["'use server';\n\nimport { z } from 'zod';\nimport { uploadImage } from '@/lib/firebase/storage';\nimport { addFigure } from '@/lib/firebase/firestore';\nimport { revalidatePath } from 'next/cache';\n\nconst figureSchema = z.object({\n  nombre: z.string().min(3),\n  descripcion: z.string().min(10),\n  categoria: z.string().min(2),\n  precio: z.coerce.number().min(0.01),\n  imagen: z.instanceof(File),\n});\n\nexport async function addFigureAction(prevState: any, formData: FormData) {\n  const validatedFields = figureSchema.safeParse(Object.fromEntries(formData.entries()));\n\n  if (!validatedFields.success) {\n    return {\n      message: 'Invalid form data. Please check your inputs.',\n      success: false,\n    };\n  }\n  \n  const { imagen, ...figureData } = validatedFields.data;\n\n  try {\n    const imagePath = `figures/${Date.now()}_${imagen.name}`;\n    const imageUrl = await uploadImage(imagen, imagePath);\n\n    await addFigure({ ...figureData, imagenUrl: imageUrl });\n    \n    revalidatePath('/');\n\n    return {\n      message: 'Figure added successfully!',\n      success: true,\n    };\n  } catch (error) {\n    console.error(error);\n    return {\n      message: 'Failed to add figure. Please try again.',\n      success: false,\n    };\n  }\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;;;;;;AAEA,MAAM,eAAe,oNAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC5B,QAAQ,oNAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IACvB,aAAa,oNAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IAC5B,WAAW,oNAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IAC1B,QAAQ,oNAAA,CAAA,IAAC,CAAC,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC;IAC9B,QAAQ,oNAAA,CAAA,IAAC,CAAC,UAAU,CAAC;AACvB;AAEO,eAAe,gBAAgB,SAAc,EAAE,QAAkB;IACtE,MAAM,kBAAkB,aAAa,SAAS,CAAC,OAAO,WAAW,CAAC,SAAS,OAAO;IAElF,IAAI,CAAC,gBAAgB,OAAO,EAAE;QAC5B,OAAO;YACL,SAAS;YACT,SAAS;QACX;IACF;IAEA,MAAM,EAAE,MAAM,EAAE,GAAG,YAAY,GAAG,gBAAgB,IAAI;IAEtD,IAAI;QACF,MAAM,YAAY,CAAC,QAAQ,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,OAAO,IAAI,EAAE;QACxD,MAAM,WAAW,MAAM,CAAA,GAAA,iIAAA,CAAA,cAAW,AAAD,EAAE,QAAQ;QAE3C,MAAM,CAAA,GAAA,mIAAA,CAAA,YAAS,AAAD,EAAE;YAAE,GAAG,UAAU;YAAE,WAAW;QAAS;QAErD,CAAA,GAAA,oSAAA,CAAA,iBAAc,AAAD,EAAE;QAEf,OAAO;YACL,SAAS;YACT,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC;QACd,OAAO;YACL,SAAS;YACT,SAAS;QACX;IACF;AACF;;;IA/BsB;;AAAA,sZAAA","debugId":null}},
    {"offset": {"line": 303, "column": 0}, "map": {"version":3,"sources":["file:///Users/alvaro/Desktop/Prueba-Frikifiguras/.next-internal/server/app/admin/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {addFigureAction as '6076d335d40d3462d4e8311409914b5bee3b52a1bd'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 355, "column": 0}, "map": {"version":3,"sources":["file:///Users/alvaro/Desktop/Prueba-Frikifiguras/src/app/admin/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,4ZAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA0R,GACvT,wDACA","debugId":null}},
    {"offset": {"line": 369, "column": 0}, "map": {"version":3,"sources":["file:///Users/alvaro/Desktop/Prueba-Frikifiguras/src/app/admin/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,4ZAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAsQ,GACnS,oCACA","debugId":null}},
    {"offset": {"line": 383, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}